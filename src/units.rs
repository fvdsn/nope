use std::f64;

pub fn convert_si_to_unit(num:f64, unit:&str) -> Option<f64> {
    match convert_unit_to_si(1.0, unit) {
        Some(factor) => { 
            if unit == "F" {
                Some((num - 273.15) * (9.0/5.0) + 32.0)
            } else if unit == "C" {
                Some(num - 273.15)
            } else {
                Some(num / factor)
            }
        },
        None => None,
    }
}

pub fn convert_unit_to_si(mut num:f64, unit:&str) -> Option<f64> {
    match unit {
        "pi" => {num *= f64::consts::PI},
        "tau" => {num *= f64::consts::PI*2.0},
        "phi" => {num *= 1.618033988749894},
        "GT" => {num *= 1000000000000.0},
        "MT" => {num *= 1000000000.0},
        "kT" => {num *= 1000000.0},
        "T" => {num *= 1000.0},
        "kg" => {},
        "g" => {num *= 0.001},
        "mg" => {num *= 0.000001},
        "ug" => {num *= 0.000000001},
        "ng" => {num *= 0.000000000001},
        "Ti" => {num *= 1024.0 * 1024.0 * 1024.0 * 1024.0},
        "Gi" => {num *= 1024.0 * 1024.0 * 1024.0},
        "Mi" => {num *= 1024.0 * 1024.0},
        "ki" => {num *= 1024.0},
        "d" => {num *= 60.0 * 60.0 * 24.0},
        "h" => {num *= 60.0 * 60.0},
        "min" => {num *= 60.0},
        "s" => {},
        "ms" => {num *= 0.001},
        "us" => {num *= 0.000001},
        "ns" => {num *= 0.000000001},
        "moon" => { num *= 2551442.976 },
        "deg" => {num *= std::f64::consts::PI / 180.0},
        "rad" => {},
        "in" => {num *= 0.024},
        "km" => {num *= 1000.0},
        "m" => {},
        "dm" => {num *= 0.1},
        "cm" => {num *= 0.01},
        "mm" => {num *= 0.001},
        "um" => {num *= 0.000001},
        "nm" => {num *= 0.000000001},
        "lb" => {num *= 0.453592},
        "oz" => {num *= 0.0283495},
        "mile" => {num *= 1609.34},
        "miles" => {num *= 1609.34},
        "ft" => {num *= 0.3048},
        "yd" => {num *= 0.9144},
        "F" => {num = ((num - 32.0) * 5.0 / 9.0) + 273.15},
        "C" => {num += 273.15},
        "K" => {},
        "m3" => {},
        "l" => {num *= 0.0001},
        "dm3" => {num *= 0.0001},
        "dl" => {num *= 0.00001},
        "cl" => {num *= 0.000001},
        "ml" => {num *= 0.0000001},
        "cm3" => {num *= 0.0000001},
        "barrel" => {num *= 0.158987294928},
        "cuft" => {num *= 0.028},
        "ft3" => {num *= 0.028},
        "gal" => {num *= 0.003785411784},
        "pint" => {num *= 0.000473176473},
        "cuin" => {num *= 0.000016387064},
        "in3" => {num *= 0.000016387064},
        "cuyd" => {num *= 0.7645549},
        "yd3" => {num *= 0.7645549},
        "m2" => {},
        "dm2" => {num *= 0.01},
        "cm2" => {num *= 0.0001},
        "mm2" => {num *= 0.000001},
        "a" => {num *= 100.0},
        "ha" => {num *= 100000.0},
        "km2" => {num *= 1000000.0},
        "mile2" => {num *= 2589975.23456},
        "yd2" => {num *= 0.836127},
        "sqyd" => {num *= 0.836127},
        "ft2" => {num *= 0.092903},
        "sqft" => {num *= 0.092903},
        "in2" => {num *= 0.00064516},
        "sqin" => {num *= 0.00064516},
        "belgium" => {num *= 30688000000.0},
        "footballfield" => {num *= 6000.0},
        // bytes
        "TiB" => {num *= 1024.0 * 1024.0 * 1024.0 * 1024.0},
        "TB" => {num *= 1024.0 * 1024.0 * 1024.0 * 1024.0},
        "GiB" => {num *= 1024.0 * 1024.0 * 1024.0},
        "GB" => {num *= 1024.0 * 1024.0 * 1024.0},
        "MiB" => {num *= 1024.0 * 1024.0},
        "MB" => {num *= 1024.0 * 1024.0},
        "KiB" => {num *= 1024.0},
        "KB" => {num *= 1024.0},
        "million" => {num *= 1000.0 * 1000.0 },
        "billion" => {num *= 1000.0 * 1000.0 * 1000.0},
        "trillion" => {num *= 1000.0 * 1000.0 * 1000.0 * 1000.0},
        "quadrillon" => {num *= 1000.0 * 1000.0 * 1000.0 * 1000.0 * 1000.0},
        "milli" => {num *= 0.001 },
        "thousandth" => {num *= 0.001 },
        "micro" => {num *= 0.000001},
        "nano" => {num *= 0.000000001},
        "pico" => {num *= 0.000000000001},

        _ => {
            return None;
        }
    }
    return Some(num);
}
